= simple_form_for([:broker, @seeker], html: { novalidate: true }) do |f|

  - if notification = f.error_notification
    .alert.alert-danger
      = notification

  %fieldset
    .form-inputs
      = f.input :status, as: :radio_buttons, collection: [{value: 'inactive', label: t('activerecord.attributes.seeker.state.inactive_html')}, {value: 'active', label: t('activerecord.attributes.seeker.state.active_html')}, {value: 'completed', label: t('activerecord.attributes.seeker.state.ended_html')}], label_method: ->(obj){obj[:label]}, value_method: ->(obj){obj[:value]}, label: false, inline_label: '', item_wrapper_class: 'control control--radio'

  %fieldset
    %legend
      = "JugendlicheR"
    .form-inputs
      = f.input :firstname, required: true
      = f.input :lastname, required: true

  %fieldset
    %a{href: "#", "data-toggle": "modal", "data-target": "#message_modal"}
      %i.fa.fa-envelope
      = "Nachricht senden"

  %fieldset
    .form-inputs
      = f.input :parental, label: false, inline_label: true
      %p
        %i.fa.fa-print.margin_left_20.green
          = link_to "Drucken", "/broker/seekers/#{@seeker.id}/agreement?format=pdf", target: '_blank'
        %a.margin_left_20{href: "#", "data-toggle": "modal", "data-target": "#message_modal"}
          %i.fa.fa-envelope
            = "Elterneinverständnis als Pdf schicken"
      = f.input :discussion, label: false, inline_label: true

  %fieldset
    .form-inputs
      = f.input :notes, label: "Notizen (nur intern sichtbar)", as: :text

  %fieldset
    .form-inputs
      = f.input :email, required: true, autofocus: true

      - if @seeker.new_record?
        = f.input :password, required: true, autocomplete: 'off'
        = f.input :password_confirmation, required: true
      -#- else
      -#  = f.input :password, required: false, autocomplete: 'off', hint: t('devise_views.leave_empty')
      -#  = f.input :password_confirmation, required: false
      = f.input :mobile, required: true
      = f.input :date_of_birth, required: true, start_year: Date.today.year - 25, end_year: Date.today.year - 13, include_blank: false, hint: 'Du solltest zwischen 13 und 25 Jahre alt sein.'
      = f.input :sex, collection: seeker_sex, include_blank: false

  %fieldset
    .form-inputs
      = f.input :street, required: true
      = f.association :place, required: true, collection: current_region.places.order(:name, :zip), include_blank: false, label_method: :full_name

  %fieldset
    .form-inputs
      = f.association :work_categories, as: :check_boxes

  %fieldset
    %legend
      = "Zuständige Organisation"
    .form-inputs
      = f.association :organization, required: true, include_blank: false, label: false, collection: current_region.organizations.order(:name).distinct

  .form-actions
    - if @seeker.new_record?
      = f.button :submit, t('common.create'), class: 'btn btn-primary btn-success'
    - else
      = f.button :submit, t('common.edit'), class: 'btn btn-primary btn-success'


%div.modal.fade{id: "message_modal"}
  %div.modal-dialog
    %div.modal-content
      %div.modal-header
        %button.close{"data-dismiss": "modal", type: "button"} &times;
        %h2= "Title"
      %div.modal-body
        %input{type: "checkbox", checked: "true"}
          = "Nachricht an "
          = @seeker.name
          = ":"
        %textarea.form-control.resize-vertical
          = "template"
        %br
        %button.btn.btn-success
          = "Title"
      %div.modal-footer