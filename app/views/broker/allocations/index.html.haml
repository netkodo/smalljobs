%h1= t('broker.jobs.allocations.index.title', title: @job.title)
%p.lead= t('broker.jobs.allocations.lead')

.table-responsive
  %table.table.table-striped
    %tr
      %th= t('activerecord.attributes.allocation.seeker')
      %th= t('activerecord.attributes.allocation.message')
      %th{ colspan: 2 }

    - if @allocations.size == 0
      %tr
        %td{ colspan: 5 }= t('broker.jobs.allocations.index.no_allocations')

    - @allocations.each do |allocation|
      %tr
        %td= allocation.seeker.name
        %td= allocation.message

        %td= link_to '', edit_broker_job_allocation_path(@job, allocation), class: 'fa fa-pencil', title: t('common.edit_title', who: allocation.name)
        %td= link_to '', broker_job_allocation_path(@job, allocation), method: :delete, title: t('common.destroy_title', who: allocation.name), data: { confirm: t('common.sure') }, class: 'fa fa-trash-o'

= link_to t('broker.jobs.allocations.index.add_new'), new_broker_job_allocation_path(@job), class: 'btn btn-primary'
= link_to t('common.back'), broker_job_path(@job)
